{"version":3,"sources":["app.js","define.js","log.js","auth.js"],"names":["$","WorkoutLog","undefined","API_BASE","setAuthHeader","sessionToken","window","localStorage","setItem","ajaxSetup","headers","Authorization","jQuery","on","e","token","getItem","this","hasClass","preventDefault","target","attr","log","setDefinitions","setHistory","document","which","is","trigger","extend","definition","userDefinitions","create","postData","desc","val","type","ajax","url","data","JSON","stringify","contentType","done","push","tab","fetchAll","authorization","fail","err","console","workouts","opts","defs","len","length","i","id","description","children","remove","append","history","lis","def","result","text","getWorkout","thisLog","logID","updateData","updateWorkout","updateLog","splice","updateLogData","delete","deleteData","deleteLog","closest","delegate","signup","user","username","password","modal","removeClass","show","login","updateInfo","loginout","removeItem","longinout"],"mappings":"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","file":"../bundle.js","sourcesContent":["$(function(){\r\n\r\n\tvar WorkoutLog = (function($, undefined) {\r\n\t\tvar API_BASE = 'https://best-fitness-app-api.herokuapp.com/api/'\r\n\t\t// var API_BASE = \"http://localhost:3000/api/\"\r\n\t\tvar userDefinitions = [];\r\n\r\n\t\tvar setAuthHeader = function(sessionToken) {\r\n\t\t\twindow.localStorage.setItem(\"sessionToken\", sessionToken);\r\n\t\t\t// Set the authorization header\r\n\t\t\t// This can be done on individual calls\r\n\t\t\t// here we showcase ajaxSetup as a global tool\r\n\t\t\t$.ajaxSetup({\r\n\t\t\t\t\"headers\": {\r\n\t\t\t\t\t\"Authorization\": sessionToken\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t//public\r\n\t\treturn {\r\n\t\t\tAPI_BASE: API_BASE,\r\n\t\t\tsetAuthHeader: setAuthHeader\r\n\t\t};\r\n\r\n\t})(jQuery);\r\n\r\n\t// Ensure .disabled aren't clickable\r\n\t$('.nav-tabs a[data-toggle=\"tab\"]').on(\"click\", function(e) {\r\n\t\tvar token = window.localStorage.getItem(\"sessionToken\");\r\n\t\tif ($(this).hasClass(\"disabled\") && !token) {\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n\r\n\t// bind tab change events\r\n\t$('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\r\n\t\tvar target = $(e.target).attr(\"href\"); //activated tab\r\n\t\tif (target === \"#log\") {\r\n\t\t\tWorkoutLog.log.setDefinitions();\r\n\t\t}\r\n\r\n\t\tif (target === \"#update-log\") {\r\n\t\t\tWorkoutLog.log.setDefinitions();\r\n\t\t}\r\n\r\n\t\tif (target === \"#history\") {\r\n\t\t\tWorkoutLog.log.setHistory();\r\n\t\t}\r\n\t});\r\n\r\n\t// bind enter key\r\n\t$(document).on(\"keypress\", function(e) {\r\n\t\tif (e.which === 13) { // enter key\r\n\t\t\tif ($(\"#signup-modal\").is(\":visible\")) {\r\n\t\t\t\t$(\"#signup\").trigger(\"click\");\r\n\t\t\t}\r\n\t\t\tif ($(\"#login-modal\").is(\":visible\")) {\r\n\t\t\t\t$(\"#login\").trigger(\"click\");\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\r\n\t\tvar target = $(e.target).attr(\"href\");\r\n\t\tif (target ===\"#log\") {\r\n\t\t\tWorkoutLog.log.setDefinitions();\r\n\t\t}\r\n\r\n\t\tif (target === \"#history\") {\r\n\t\t\tWorkoutLog.log.setHistory();\r\n\t\t}\r\n\t});\r\n\r\n\tvar token = window.localStorage.getItem(\"sessionToken\");\r\n\tif (token) {\r\n\t\tWorkoutLog.setAuthHeader(token);\r\n\t}\r\n\r\n\t// expose this to the other workoutlog modules\r\n\twindow.WorkoutLog = WorkoutLog;\r\n\r\n});","$(function() {\r\n\t$.extend(WorkoutLog, {\r\n\t\tdefinition: {\r\n\t\t\tuserDefinitions: [],\r\n\r\n\t\t\tcreate: function() {\r\n\t\t\t\tvar def = {\r\n\t\t\t\t\tdesc: $(\"#def-description\").val(),\r\n\t\t\t\t\ttype: $(\"#def-logtype\").val()\r\n\t\t\t\t};\r\n\t\t\t\tvar postData = { definition: def };\r\n\t\t\t\tvar define = $.ajax({\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\r\n\t\t\t\t\tdata: JSON.stringify(postData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdefine.done(function(data) {\r\n\r\n\t\t\t\t\tWorkoutLog.definition.userDefinitions.push(data.definition);\r\n\t\t\t\t\t$(\"#def-description\").val(\"\");\r\n\t\t\t\t\t$(\"#def-logtype\").val(\"\");\r\n\t\t\t\t\t$('a[href=\"#log\"]').tab(\"show\");\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfetchAll: function() {\r\n\t\t\t\tvar fetchDefs = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"authorization\": window.localStorage.getItem(\"sessionToken\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.definition.userDefinitions = data;\r\n\t\t\t\t})\r\n\t\t\t.fail(function(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n});\r\n\r\n//bindings\r\n$(\"#def-save\").on(\"click\", WorkoutLog.definition.create);\r\n\r\nif (window.localStorage.getItem(\"sessionToken\")) {\r\n\tWorkoutLog.definition.fetchAll();\r\n}\r\n\r\n//fetch definitions if we already are authnticated and refreshed\r\n})","$(function() {\r\n\t$.extend(WorkoutLog, {\r\n\t\tlog: {\r\n\t\t\tworkouts: [],\r\n\r\n\t\t\tsetDefinitions: function() {\r\n\t\t\t\tvar defs = WorkoutLog.definition.userDefinitions;\r\n\t\t\t\tvar len = defs.length;\r\n\t\t\t\tvar opts;\r\n\t\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\t\topts += \"<option value='\" + defs[i].id +\"'>\" + defs[i].description + \"</option>\";\r\n\t\t\t\t}\r\n\t\t\t\t$(\"#log-definition\").children().remove();\r\n\t\t\t\t$(\"#log-definition\").append(opts);\r\n\t\t\t\t$(\"#update-definition\").children().remove();\r\n\t\t\t\t$(\"#update-definition\").append(opts)\r\n\t\t\t},\r\n\t\t\tsetHistory: function() {\r\n\t\t\t\tvar history = WorkoutLog.log.workouts;\r\n\t\t\t\tvar len = history.length;\r\n\t\t\t\tvar lis = \"\";\r\n\t\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\t\tlis += \"<li class='list-group-item'>\" + history[i].def + \" - \" + history[i].result + \" \" + \"<div class='pull-right'>\" + \"<button id='\" + history[i].id + \"' class='update'><strong>U</strong></button>\" + \"<button id='\" + history[i].id + \"' class='remove'><strong>X</strong></button>\" + \"</div></li>\";\r\n\t\t\t\t}\r\n\t\t\t\t$(\"#history-list\").children().remove();\r\n\t\t\t\t$(\"#history-list\").append(lis);\r\n\t\t\t},\r\n\t\t\tcreate: function() {\r\n\t\t\t\tvar itsLog = {\r\n\t\t\t\t\tdesc: $(\"#log-description\").val(),\r\n\t\t\t\t\tresult: $(\"#log-result\").val(),\r\n\t\t\t\t\tdef: $(\"#log-definition option:selected\").text()\r\n\t\t\t\t};\r\n\t\t\t\tvar postData = {log: itsLog};\r\n\t\t\t\tvar logger = $.ajax({\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(postData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t});\r\n\t\t\t\tlogger.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.log.workouts.push(data);\r\n\t\t\t\t\t$(\"#log-description\").val(\"\");\r\n\t\t\t\t\t$(\"#log-result\").val(\"\");\r\n\t\t\t\t\t$('a[href=\"#history\"]').tab(\"show\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tgetWorkout: function() {\r\n\t\t\t\tvar thisLog = {id: $(this).attr(\"id\")};\r\n\t\t\t\tconsole.log(thisLog);\r\n\t\t\t\tlogID = thisLog.id;\r\n\t\t\t\tvar updateData = {log: thisLog};\r\n\t\t\t\tvar getLog = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log/\" + logID,\r\n\t\t\t\t\tdata: JSON.stringify(updateData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t});\r\n\t\t\t\t\tgetLog.done(function(data){\r\n\r\n\t\t\t\t\t$('a[href=\"#update-log\"]').tab(\"show\");\r\n\t\t\t\t\t$(\"#update-result\").val(data.result);\r\n\t\t\t\t\t$(\"#update-description\").val(data.description);\r\n\t\t\t\t\t$(\"#update-id\").val(data.id)\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tupdateWorkout: function() {\r\n\t\t\t\t$(\"#update\").text(\"Update\");\r\n\t\t\t\tvar updateLog = {\r\n\t\t\t\t\tid: $(\"#update-id\").val(),\r\n\t\t\t\t\tdesc: $(\"#update-description\").val(),\r\n\t\t\t\t\t\tresult: $(\"#update-result\").val(),\r\n\t\t\t\t\t\tdef: $(\"#update-definition option:selected\").text()\r\n\t\t\t\t};\r\n\t\t\t\tfor(var i = 0; i < WorkoutLog.log.workouts.length; i++){\r\n\t\t\t\t\tif (WorkoutLog.log.workouts[i].id == updateLog.id) {\r\n\t\t\t\t\t\tWorkoutLog.log.workouts.splice(1, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tWorkoutLog.log.workouts.push(updateLog);\r\n\t\t\t\tvar updateLogData = {log: updateLog}\r\n\t\t\t\tvar updater = $.ajax({\r\n\t\t\t\t\ttype: \"PUT\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(updateLogData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tupdater.done(function(data) {\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t$(\"#update-description\").val(\"\");\r\n\t\t\t\t\t$(\"#update-result\").val(\"\");\r\n\t\t\t\t\t$('a[href=\"#history\"]').tab(\"show\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tdelete: function(){\r\n\t\t\t\tvar thisLog = {\r\n\t\t\t\t\t//\"this\" is the button on the li\r\n\t\t\t\t\t//.attr(\"id\") targets the value of the id attribute of button\r\n\t\t\t\t\tid: $(this).attr(\"id\")\r\n\t\t\t\t};\r\n\t\t\t\tvar deleteData = {log: thisLog};\r\n\t\t\t\tvar deleteLog = $.ajax({\r\n\t\t\t\t\ttype: \"DELETE\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(deleteData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//removes list item\r\n\t\t\t\t//references button then grabs closest li\r\n\t\t\t\t$(this).closest(\"li\").remove();\r\n\r\n\t\t\t\t//deletes item out of workouts array\r\n\t\t\t\tfor(var i = 0; i < WorkoutLog.log.workouts.length; i++){\r\n\t\t\t\t\tif(WorkoutLog.log.workouts[i].id == thisLog.id){\r\n\t\t\t\t\t\tWorkoutLog.log.workouts.splice(i, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdeleteLog.fail(function(){\r\n\t\t\t\t\tconsole.log(\"not deleted\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tfetchAll: function() {\r\n\t\t\t\tvar fetchDefs = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"authorization\":\r\n\t\t\t\t\t\twindow.localStorage.getItem(\"sessionToken\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.log.workouts = data;\r\n\t\t\t\t})\r\n\t\t\t\t.fail(function(err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t//Click the button and create a log entry.\r\n\t$(\"#log-save\").on(\"click\", WorkoutLog.log.create);\r\n\t$(\"#history-list\").delegate('.remove', 'click', WorkoutLog.log.delete);\r\n\t$(\"#log-update\").on(\"click\", WorkoutLog.log.updateWorkout);\r\n\t$(\"#history-list\").delegate('.update', 'click', WorkoutLog.log.getWorkout);\r\n\r\n\tif (window.localStorage.getItem(\"sessionToken\")){\r\n\t\tWorkoutLog.log.fetchAll();\r\n\t}\r\n})","$(function(){\r\n\t$.extend(WorkoutLog, {\r\n\t\t//signup method\r\n\t\tsignup: function(){\r\n\t\t\t//username & password variables.\r\n\t\t\tvar username = $(\"#su_username\").val();\r\n\t\t\tvar password = $(\"#su_password\").val();\r\n\t\t\t//user object\r\n\t\t\tvar user = {\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tusername: username,\r\n\t\t\t\t\tpassword: password\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t//signup post\r\n\t\t\tconsole.log(user)\r\n\t\t\tvar signup = $.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"user\",\r\n\t\t\t\tdata: JSON.stringify(user),\r\n\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t});\r\n\t\t\t//signup done/fail\r\n\t\t\tsignup.done(function(data) {\r\n\t\t\t\tconsole.log(\"done function worked\")\r\n\t\t\t\tif (data.sessionToken) {\r\n\t\t\t\t\tWorkoutLog.setAuthHeader(data.sessionToken);\r\n\t\t\t\t\tWorkoutLog.definition.fetchAll();\r\n\t\t\t\t\tWorkoutLog.log.fetchAll();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(\"#signup-modal\").modal(\"hide\");\r\n\t\t\t\t$(\".disabled\").removeClass(\"disabled\");\r\n\t\t\t\t$(\"#loginout\").text(\"Logout\");\r\n\t\t\t\t$(\"#su_username\").val(\"\");\r\n\t\t\t\t$(\"#su_password\").val(\"\");\r\n\t\t\t\t$('a[href=\"#define\"]').tab('show');\r\n\t\t\t\t//$('#hometoggle').text(\"\")\r\n\t\t\t}).fail(function() {\r\n\t\t\t\tconsole.log(\"failed\")\r\n\t\t\t\t$(\"#su_error\").text(\"There was an issue with sign up\").show();\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t//login method\r\n\t\tlogin: function(){\r\n\t\t\t//login variables\r\n\t\t\tvar username = $(\"#li_username\").val();\r\n\t\t\tvar password = $(\"#li_password\").val();\r\n\t\t\tvar user = {user: {username: username, password: password}};\r\n\r\n\t\t\t//login POST\r\n\t\t\tconsole.log(user)\r\n\t\t\tvar login = $.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"login\",\r\n\t\t\t\tdata: JSON.stringify(user),\r\n\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t});\r\n\t\t\t//login done/fail\r\n\t\t\tlogin.done(function(data) {\r\n\t\t\t\tif (data.sessionToken) {\r\n\t\t\t\t\tWorkoutLog.setAuthHeader(data.sessionToken);\r\n\t\t\t\t\tWorkoutLog.definition.fetchAll();\r\n\t\t\t\t\tWorkoutLog.log.fetchAll();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$(\"#login-modal\").modal(\"hide\");\r\n\t\t\t\t\t$(\".disabled\").removeClass(\"disabled\");\r\n\t\t\t\t\t$(\"#loginout\").text(\"Logout\");\r\n\t\t\t\t\t$(\"#li_username\").val(\"\");\r\n\t\t\t\t\t$(\"#li_password\").val(\"\");\r\n\t\t\t\t\t$('a[href=\"#define\"]').tab(\"show\");\r\n\r\n\t\t\t\t}).fail(function() {\r\n\t\t\t\t\t$(\"#li_error\").text(\"There was an issue with sign up\").show();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\tupdateInfo: function(){\r\n\t\t\tvar username = $(\"#li_username\").val();\r\n\t\t\tvar password = $(\"#li_password\").val();\r\n\t\t\tvar user = {user: {username: username, password: password}};\r\n\r\n\t\t\tconsole.log(user)\r\n\t\t\tvar login = $.ajax({\r\n\t\t\t\ttype: \"PUT\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"login\",\r\n\t\t\t\tdata: JSON.stringify(user),\r\n\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t});\r\n\r\n\t\t\tupdateInfo.done(function(data) {\r\n\t\t\t\tif (data.sessionToken) {\r\n\t\t\t\t\tWorkoutLog.setAuthHeader(data.sessionToken);\r\n\t\t\t\t\tWorkoutLog.definition.fetchAll();\r\n\t\t\t\t\tWorkoutLog.log.fetchAll();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t$(\"#li_username\").val(\"\");\r\n\t\t\t\t\t$(\"#li_password\").val(\"\");\r\n\t\t\t\t\t$(\".disabled\").removeClass(\"disabled\");\r\n\r\n\t\t\t\t}).fail(function() {\r\n\t\t\t\t\t$(\"#li_error\").text(\"There was an issue with sign up\").show();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t//loginout method\r\n\t\tloginout: function() {\r\n\t\t\tif(window.localStorage.getItem(\"sessionToken\")) {\r\n\t\t\t\twindow.localStorage.removeItem(\"sessionToken\");\r\n\t\t\t\t$(\"#loginout\").text(\"Login\");\r\n\t\t\t}\r\n\r\n\t\t\t//TODO: on logout make sure stuff is disabled\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t//bind events]\r\n\t$(\"#login\").on(\"click\", WorkoutLog.login);\r\n\t$(\"#signup\").on(\"click\", WorkoutLog.signup);\r\n\t$(\"#loginout\").on(\"click\", WorkoutLog.longinout);\r\n\r\n\tif(window.localStorage.getItem(\"sessionToken\")) {\r\n\t\t$(\"#loginout\").text(\"Logout\");\r\n\t}\r\n});\r\n"]}